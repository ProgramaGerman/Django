{# task.html #}
{% extends "layouts/base.html" %}

{% block content %}
{% load static %}
{% block extra_head %}
<link rel="stylesheet" href="{% static 'styles/task.css' %}">
{% endblock %}

<script>
document.addEventListener('DOMContentLoaded', function() {
    var nav = document.querySelector('nav');
    if (nav) {
        // Reduce navbar al cargar esta página
        nav.classList.add('shrink');
        // Opcional: restaurar al salir de la página
        window.addEventListener('beforeunload', function() {
            nav.classList.remove('shrink');
        });
    }
});
</script>

<h1>Lista de Tareas</h1>
<p style="text-align:center; max-width:600px; margin:0 auto 30px; color:#fff;">
    Organiza y visualiza tus tareas de manera eficiente. Marca como completadas o elimina las que ya no necesites.
</p>

{% for task in tasks %}
    <article>
        <h2>
            {% if task.done == False %}
                <span title="Pendiente">🕓</span>
            {% else %}
                <span title="Completada">✅</span>
            {% endif %}
            <span>Título: {{ task.title }}</span>
        </h2>
        <p><strong>Descripción:</strong> {{ task.description }}</p>
        <h2 style="font-size:1.1rem; color:#2980b9;">
            Proyecto: {{ task.project.name }}
        </h2>
        <div style="margin-top:18px;">
            <button title="Eliminar">🗑️ Eliminar</button>
            <button title="Marcar como completada">✅ Hecho</button>
        </div>
    </article>
{% empty %}
    <article>
        <h2 style="color:#e74c3c;">No hay tareas registradas.</h2>
        <p>¡Agrega una nueva tarea para comenzar!</p>
    </article>
{% endfor %}
{% endblock content %}
